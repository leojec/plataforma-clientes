{"ast":null,"code":"import _objectSpread from\"/Users/leonardorocha/Documents/TCC/projeto/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';const normalizeURL=url=>{if(!url)return'http://localhost:8080/api';return url.replace(/[\\u200B-\\u200D\\uFEFF\\u200C\\u200D]/g,'').trim().replace(/\\/+$/,'');};const isProduction=window.location.protocol==='https:';const backendURL=process.env.REACT_APP_BACKEND_URL;const apiURL=process.env.REACT_APP_API_URL;let baseURL;if(apiURL){baseURL=apiURL;}else if(isProduction&&backendURL){if(backendURL.startsWith('http://')&&backendURL.includes('elasticbeanstalk.com')){baseURL=backendURL.replace('http://','https://');console.warn('‚ö†Ô∏è Convertendo backend URL de HTTP para HTTPS para evitar Mixed Content');}else{baseURL=backendURL;}}else if(backendURL){baseURL=backendURL;}else{baseURL='http://localhost:8080/api';}const normalizedURL=normalizeURL(baseURL);const finalBaseURL=normalizedURL.endsWith('/api')?normalizedURL:\"\".concat(normalizedURL,\"/api\");const api=axios.create({baseURL:finalBaseURL,timeout:10000});console.log('üîó API Base URL:',finalBaseURL);console.log('üîó Ambiente:',isProduction?'Produ√ß√£o (HTTPS)':'Desenvolvimento');console.log('üîó REACT_APP_BACKEND_URL:',process.env.REACT_APP_BACKEND_URL||'n√£o definido');console.log('üîó REACT_APP_API_URL:',process.env.REACT_APP_API_URL||'n√£o definido');api.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});api.interceptors.response.use(response=>{const contentType=response.headers['content-type']||'';if(contentType.includes('text/html')){var _response$config,_response$data;console.error('‚ùå API retornou HTML ao inv√©s de JSON. URL:',(_response$config=response.config)===null||_response$config===void 0?void 0:_response$config.url);console.error('‚ùå Resposta HTML:',(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.substring(0,200));console.error('üí° Dica: Configure REACT_APP_BACKEND_URL com a URL direta do backend (Elastic Beanstalk)');const error=new Error('API retornou HTML ao inv√©s de JSON. Verifique a URL base e o endpoint. Se estiver usando CloudFront, configure REACT_APP_BACKEND_URL com a URL direta do backend.');error.response=_objectSpread(_objectSpread({},response),{},{data:null,isHtmlResponse:true});return Promise.reject(error);}if(typeof response.data==='string'&&response.data.trim().startsWith('<!')){var _response$config2;console.error('‚ùå API retornou HTML ao inv√©s de JSON. URL:',(_response$config2=response.config)===null||_response$config2===void 0?void 0:_response$config2.url);console.error('üí° Dica: Configure REACT_APP_BACKEND_URL com a URL direta do backend (Elastic Beanstalk)');const error=new Error('API retornou HTML ao inv√©s de JSON. Verifique a URL base e o endpoint. Se estiver usando CloudFront, configure REACT_APP_BACKEND_URL com a URL direta do backend.');error.response=_objectSpread(_objectSpread({},response),{},{isHtmlResponse:true});return Promise.reject(error);}return response;},error=>{var _error$response,_error$response2,_error$response3;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');window.location.href='/login';}if((_error$response2=error.response)!==null&&_error$response2!==void 0&&_error$response2.data&&typeof error.response.data==='string'&&error.response.data.trim().startsWith('<!')){console.error('‚ùå Erro: API retornou HTML ao inv√©s de JSON');error.message='API retornou HTML ao inv√©s de JSON. Verifique a URL base e o endpoint.';error.isHtmlResponse=true;}if((_error$response3=error.response)!==null&&_error$response3!==void 0&&_error$response3.data&&!error.isHtmlResponse){const errorData=error.response.data;if(typeof errorData==='object'&&errorData!==null){error.message=errorData.message||errorData.error||'Erro do servidor';}}return Promise.reject(error);});export{api};","map":{"version":3,"names":["axios","normalizeURL","url","replace","trim","isProduction","window","location","protocol","backendURL","process","env","REACT_APP_BACKEND_URL","apiURL","REACT_APP_API_URL","baseURL","startsWith","includes","console","warn","normalizedURL","finalBaseURL","endsWith","concat","api","create","timeout","log","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","contentType","_response$config","_response$data","data","substring","Error","_objectSpread","isHtmlResponse","_response$config2","_error$response","_error$response2","_error$response3","status","removeItem","href","message","errorData"],"sources":["/Users/leonardorocha/Documents/TCC/projeto/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst normalizeURL = (url) => {\n  if (!url) return 'http://localhost:8080/api';\n\n  return url.replace(/[\\u200B-\\u200D\\uFEFF\\u200C\\u200D]/g, '').trim().replace(/\\/+$/, '');\n};\n\n\nconst isProduction = window.location.protocol === 'https:';\n\n\nconst backendURL = process.env.REACT_APP_BACKEND_URL;\nconst apiURL = process.env.REACT_APP_API_URL;\n\nlet baseURL;\n\nif (apiURL) {\n  baseURL = apiURL;\n} else if (isProduction && backendURL) {\n\n  if (backendURL.startsWith('http://') && backendURL.includes('elasticbeanstalk.com')) {\n    baseURL = backendURL.replace('http://', 'https://');\n    console.warn('‚ö†Ô∏è Convertendo backend URL de HTTP para HTTPS para evitar Mixed Content');\n  } else {\n    baseURL = backendURL;\n  }\n} else if (backendURL) {\n\n  baseURL = backendURL;\n} else {\n\n  baseURL = 'http://localhost:8080/api';\n}\n\n\nconst normalizedURL = normalizeURL(baseURL);\nconst finalBaseURL = normalizedURL.endsWith('/api') ? normalizedURL : `${normalizedURL}/api`;\n\nconst api = axios.create({\n  baseURL: finalBaseURL,\n  timeout: 10000,\n});\n\nconsole.log('üîó API Base URL:', finalBaseURL);\nconsole.log('üîó Ambiente:', isProduction ? 'Produ√ß√£o (HTTPS)' : 'Desenvolvimento');\nconsole.log('üîó REACT_APP_BACKEND_URL:', process.env.REACT_APP_BACKEND_URL || 'n√£o definido');\nconsole.log('üîó REACT_APP_API_URL:', process.env.REACT_APP_API_URL || 'n√£o definido');\n\n\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\napi.interceptors.response.use(\n  (response) => {\n\n    const contentType = response.headers['content-type'] || '';\n    if (contentType.includes('text/html')) {\n      console.error('‚ùå API retornou HTML ao inv√©s de JSON. URL:', response.config?.url);\n      console.error('‚ùå Resposta HTML:', response.data?.substring(0, 200));\n      console.error('üí° Dica: Configure REACT_APP_BACKEND_URL com a URL direta do backend (Elastic Beanstalk)');\n\n      const error = new Error('API retornou HTML ao inv√©s de JSON. Verifique a URL base e o endpoint. Se estiver usando CloudFront, configure REACT_APP_BACKEND_URL com a URL direta do backend.');\n      error.response = {\n        ...response,\n        data: null,\n        isHtmlResponse: true\n      };\n      return Promise.reject(error);\n    }\n\n    if (typeof response.data === 'string' && response.data.trim().startsWith('<!')) {\n      console.error('‚ùå API retornou HTML ao inv√©s de JSON. URL:', response.config?.url);\n      console.error('üí° Dica: Configure REACT_APP_BACKEND_URL com a URL direta do backend (Elastic Beanstalk)');\n      const error = new Error('API retornou HTML ao inv√©s de JSON. Verifique a URL base e o endpoint. Se estiver usando CloudFront, configure REACT_APP_BACKEND_URL com a URL direta do backend.');\n      error.response = {\n        ...response,\n        isHtmlResponse: true\n      };\n      return Promise.reject(error);\n    }\n\n    return response;\n  },\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n\n    if (error.response?.data && typeof error.response.data === 'string' && error.response.data.trim().startsWith('<!')) {\n      console.error('‚ùå Erro: API retornou HTML ao inv√©s de JSON');\n      error.message = 'API retornou HTML ao inv√©s de JSON. Verifique a URL base e o endpoint.';\n      error.isHtmlResponse = true;\n    }\n\n    if (error.response?.data && !error.isHtmlResponse) {\n      const errorData = error.response.data;\n      if (typeof errorData === 'object' && errorData !== null) {\n\n        error.message = errorData.message || errorData.error || 'Erro do servidor';\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport { api };\n"],"mappings":"wIAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAGzB,KAAM,CAAAC,YAAY,CAAIC,GAAG,EAAK,CAC5B,GAAI,CAACA,GAAG,CAAE,MAAO,2BAA2B,CAE5C,MAAO,CAAAA,GAAG,CAACC,OAAO,CAAC,oCAAoC,CAAE,EAAE,CAAC,CAACC,IAAI,CAAC,CAAC,CAACD,OAAO,CAAC,MAAM,CAAE,EAAE,CAAC,CACzF,CAAC,CAGD,KAAM,CAAAE,YAAY,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,QAAQ,CAG1D,KAAM,CAAAC,UAAU,CAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,CACpD,KAAM,CAAAC,MAAM,CAAGH,OAAO,CAACC,GAAG,CAACG,iBAAiB,CAE5C,GAAI,CAAAC,OAAO,CAEX,GAAIF,MAAM,CAAE,CACVE,OAAO,CAAGF,MAAM,CAClB,CAAC,IAAM,IAAIR,YAAY,EAAII,UAAU,CAAE,CAErC,GAAIA,UAAU,CAACO,UAAU,CAAC,SAAS,CAAC,EAAIP,UAAU,CAACQ,QAAQ,CAAC,sBAAsB,CAAC,CAAE,CACnFF,OAAO,CAAGN,UAAU,CAACN,OAAO,CAAC,SAAS,CAAE,UAAU,CAAC,CACnDe,OAAO,CAACC,IAAI,CAAC,yEAAyE,CAAC,CACzF,CAAC,IAAM,CACLJ,OAAO,CAAGN,UAAU,CACtB,CACF,CAAC,IAAM,IAAIA,UAAU,CAAE,CAErBM,OAAO,CAAGN,UAAU,CACtB,CAAC,IAAM,CAELM,OAAO,CAAG,2BAA2B,CACvC,CAGA,KAAM,CAAAK,aAAa,CAAGnB,YAAY,CAACc,OAAO,CAAC,CAC3C,KAAM,CAAAM,YAAY,CAAGD,aAAa,CAACE,QAAQ,CAAC,MAAM,CAAC,CAAGF,aAAa,IAAAG,MAAA,CAAMH,aAAa,QAAM,CAE5F,KAAM,CAAAI,GAAG,CAAGxB,KAAK,CAACyB,MAAM,CAAC,CACvBV,OAAO,CAAEM,YAAY,CACrBK,OAAO,CAAE,KACX,CAAC,CAAC,CAEFR,OAAO,CAACS,GAAG,CAAC,kBAAkB,CAAEN,YAAY,CAAC,CAC7CH,OAAO,CAACS,GAAG,CAAC,cAAc,CAAEtB,YAAY,CAAG,kBAAkB,CAAG,iBAAiB,CAAC,CAClFa,OAAO,CAACS,GAAG,CAAC,2BAA2B,CAAEjB,OAAO,CAACC,GAAG,CAACC,qBAAqB,EAAI,cAAc,CAAC,CAC7FM,OAAO,CAACS,GAAG,CAAC,uBAAuB,CAAEjB,OAAO,CAACC,GAAG,CAACG,iBAAiB,EAAI,cAAc,CAAC,CAGrFU,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,EAAK,CACV,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACI,OAAO,CAACC,aAAa,WAAAb,MAAA,CAAaS,KAAK,CAAE,CAClD,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CACAM,KAAK,EAAK,CACT,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAEDb,GAAG,CAACI,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC1BU,QAAQ,EAAK,CAEZ,KAAM,CAAAC,WAAW,CAAGD,QAAQ,CAACL,OAAO,CAAC,cAAc,CAAC,EAAI,EAAE,CAC1D,GAAIM,WAAW,CAACxB,QAAQ,CAAC,WAAW,CAAC,CAAE,KAAAyB,gBAAA,CAAAC,cAAA,CACrCzB,OAAO,CAACmB,KAAK,CAAC,4CAA4C,EAAAK,gBAAA,CAAEF,QAAQ,CAACT,MAAM,UAAAW,gBAAA,iBAAfA,gBAAA,CAAiBxC,GAAG,CAAC,CACjFgB,OAAO,CAACmB,KAAK,CAAC,kBAAkB,EAAAM,cAAA,CAAEH,QAAQ,CAACI,IAAI,UAAAD,cAAA,iBAAbA,cAAA,CAAeE,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,CAAC,CACnE3B,OAAO,CAACmB,KAAK,CAAC,0FAA0F,CAAC,CAEzG,KAAM,CAAAA,KAAK,CAAG,GAAI,CAAAS,KAAK,CAAC,mKAAmK,CAAC,CAC5LT,KAAK,CAACG,QAAQ,CAAAO,aAAA,CAAAA,aAAA,IACTP,QAAQ,MACXI,IAAI,CAAE,IAAI,CACVI,cAAc,CAAE,IAAI,EACrB,CACD,MAAO,CAAAV,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CAEA,GAAI,MAAO,CAAAG,QAAQ,CAACI,IAAI,GAAK,QAAQ,EAAIJ,QAAQ,CAACI,IAAI,CAACxC,IAAI,CAAC,CAAC,CAACY,UAAU,CAAC,IAAI,CAAC,CAAE,KAAAiC,iBAAA,CAC9E/B,OAAO,CAACmB,KAAK,CAAC,4CAA4C,EAAAY,iBAAA,CAAET,QAAQ,CAACT,MAAM,UAAAkB,iBAAA,iBAAfA,iBAAA,CAAiB/C,GAAG,CAAC,CACjFgB,OAAO,CAACmB,KAAK,CAAC,0FAA0F,CAAC,CACzG,KAAM,CAAAA,KAAK,CAAG,GAAI,CAAAS,KAAK,CAAC,mKAAmK,CAAC,CAC5LT,KAAK,CAACG,QAAQ,CAAAO,aAAA,CAAAA,aAAA,IACTP,QAAQ,MACXQ,cAAc,CAAE,IAAI,EACrB,CACD,MAAO,CAAAV,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CAEA,MAAO,CAAAG,QAAQ,CACjB,CAAC,CACAH,KAAK,EAAK,KAAAa,eAAA,CAAAC,gBAAA,CAAAC,gBAAA,CACT,GAAI,EAAAF,eAAA,CAAAb,KAAK,CAACG,QAAQ,UAAAU,eAAA,iBAAdA,eAAA,CAAgBG,MAAM,IAAK,GAAG,CAAE,CAClCpB,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC,CAChChD,MAAM,CAACC,QAAQ,CAACgD,IAAI,CAAG,QAAQ,CACjC,CAEA,GAAI,CAAAJ,gBAAA,CAAAd,KAAK,CAACG,QAAQ,UAAAW,gBAAA,WAAdA,gBAAA,CAAgBP,IAAI,EAAI,MAAO,CAAAP,KAAK,CAACG,QAAQ,CAACI,IAAI,GAAK,QAAQ,EAAIP,KAAK,CAACG,QAAQ,CAACI,IAAI,CAACxC,IAAI,CAAC,CAAC,CAACY,UAAU,CAAC,IAAI,CAAC,CAAE,CAClHE,OAAO,CAACmB,KAAK,CAAC,4CAA4C,CAAC,CAC3DA,KAAK,CAACmB,OAAO,CAAG,wEAAwE,CACxFnB,KAAK,CAACW,cAAc,CAAG,IAAI,CAC7B,CAEA,GAAI,CAAAI,gBAAA,CAAAf,KAAK,CAACG,QAAQ,UAAAY,gBAAA,WAAdA,gBAAA,CAAgBR,IAAI,EAAI,CAACP,KAAK,CAACW,cAAc,CAAE,CACjD,KAAM,CAAAS,SAAS,CAAGpB,KAAK,CAACG,QAAQ,CAACI,IAAI,CACrC,GAAI,MAAO,CAAAa,SAAS,GAAK,QAAQ,EAAIA,SAAS,GAAK,IAAI,CAAE,CAEvDpB,KAAK,CAACmB,OAAO,CAAGC,SAAS,CAACD,OAAO,EAAIC,SAAS,CAACpB,KAAK,EAAI,kBAAkB,CAC5E,CACF,CAEA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,OAASb,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}